<!DOCTYPE html>
<!-- saved from url=(0073)https://digital.sparta.cl/stock-tiendas/index.html?sku=104000000027341002 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<script src="./jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>   
<style>
    
body{
    width: 50%;
    display: block;
    margin-left: auto;
    margin-right: auto;
    font-family: 'SuperGrotesk-Bold',Arial,sans-serif;
    }
    
@media all and (max-width: 992px) {
    body{
    width: 80%;
    display: block;
    margin-left: auto;
    margin-right: auto;
    }
}
    
@media all and (max-width: 767px) {
    body{
    width: 90%;
    display: block;
    margin-left: auto;
    margin-right: auto;
    }
}
    
.accordion {
  background-color: #eee;
  color: #444;
  cursor: pointer;
  padding: 18px;
  width: 100%;
  border: none;
  text-align: left;
  outline: none;
  font-size: 15px;
  transition: 0.4s;
margin-bottom: 2px;
}

.active, .accordion:hover {
  background-color: #ccc;
  color:#0eabec;
}

.panel {
  padding: 0 20px;
  display: none;
  background-color: white;
  overflow: hidden;
}
    
a{
    color:#0eabec;
    text-decoration: none;
}
    
button.accordion:after {
    content: '\002B';
    color: #0eabec;
    font-weight: bold;
    float: right;
    margin-left: 5px;
}

button.accordion.active:after {
    content: "\2212";
}
    
.circulo-verde {
     width: 10px;
     height: 10px;
     -moz-border-radius: 50%;
     -webkit-border-radius: 50%;
     border-radius: 50%;
     background: #5cb85c;
}
.circulo-amarillo {
     width: 10px;
     height: 10px;
     -moz-border-radius: 50%;
     -webkit-border-radius: 50%;
     border-radius: 50%;
     background: #fdbe01;
}
.circulo-rojo {
     width: 10px;
     height: 10px;
     -moz-border-radius: 50%;
     -webkit-border-radius: 50%;
     border-radius: 50%;
     background: #fd2701;
}

.mt-30px{
    margin-top: 30px;
}

.fa-map-marker-alt:before {
    content: "\f3c5";
}

 .sm-carga{
   width: 50px;
   height: auto;
   display: block;
   margin-left: auto;
   margin-right: auto;
   }
      
</style>
</head>
<body>

<h2>Tiendas con Stock Disponible</h2>    
<p> Stock mayor a 5 unidades = <img class="circulo-verde"> <img class="circulo-verde"> <img class="circulo-verde"></p>    
<p> Stock entre 4 y 5 unidades = <img class="circulo-amarillo"> <img class="circulo-amarillo"></p>
<p> Stock menor a 4 unidades = <img class="circulo-rojo"></p>
<a href="https://digital.sparta.cl/stock-tiendas/index.html?sku=104000000027341002#" onclick="goBack()">Volver</a>
<hr color="#dadada" size="1">
<h4 class="mt-30px" id="selecciona_region">Selecciona tu Región</h4>
<div id="gif"></div>

<div id="contenido"><button class="accordion" style="border-radius:20px 20px 0 0;">Araucanía</button><div class="panel"><div><p><strong>Sparta Portal Temuco</strong></p><a href="https://www.google.cl/maps/place/Portal+Temuco/@-38.7341887,-72.6135132,17z/data=!3m1!4b1!4m5!3m4!1s0x96623f0f6ecffc81:0xa0819486bef36f8d!8m2!3d-38.7341929!4d-72.6113245" target="_blank"><p>Cómo llegar</p></a><table style="width: 100%;"><tbody><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 8</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 9</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 9.5</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 10</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 10.5</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 11.5</td></tr></tbody></table><hr color="#dadada" size="1"></div></div><button class="accordion">Biobío</button><div class="panel"><div><p><strong>Sparta Mall el Trebol</strong></p><a href="https://www.google.cl/maps/place/Mallplaza+El+Tr%C3%A9bol/@-36.792287,-73.0684825,17z/data=!3m1!4b1!4m5!3m4!1s0x9669b5745f460495:0x1bf5dd96a8168e34!8m2!3d-36.7922913!4d-73.0662938" target="_blank"><p>Cómo llegar</p></a><table style="width: 100%;"><tbody><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 10</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 12</td></tr></tbody></table><hr color="#dadada" size="1"></div></div><button class="accordion">Coquimbo</button><div class="panel"><div><p><strong>Sparta La Serena Mall Plaza</strong></p><a href="https://www.google.cl/maps/place/Mall+Plaza+La+Serena/@-29.9121863,-71.2608437,17z/data=!3m1!4b1!4m5!3m4!1s0x9691ca51d90f3163:0xd42bcf9c19a56701!8m2!3d-29.912191!4d-71.258655" target="_blank"><p>Cómo llegar</p></a><table style="width: 100%;"><tbody><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 10</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 11.5</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 12</td></tr></tbody></table><hr color="#dadada" size="1"></div></div><button class="accordion">Metropolitana de Santiago</button><div class="panel"><div><p><strong>Sparta Alto Las Condes</strong></p><a href="https://www.google.cl/maps/place/Alto+Las+Condes/@-33.3908105,-70.5481807,17z/data=!3m1!4b1!4m5!3m4!1s0x9662ceb46835b925:0xcd3927b10fbcf564!8m2!3d-33.390815!4d-70.545992" target="_blank"><p>Cómo llegar</p></a><table style="width: 100%;"><tbody><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 8.5</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 9</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 9.5</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 10</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 10.5</td></tr></tbody></table><hr color="#dadada" size="1"></div><div><p><strong>Sparta Costanera Center</strong></p><a href="https://www.google.cl/maps/place/Mall+Costanera/@-33.41794,-70.60915,17z/data=!4m8!1m2!2m1!1sCostanera+Center!3m4!1s0x9662cf42852fa709:0xbaef1bdfa066e82f!8m2!3d-33.4178955!4d-70.6075325" target="_blank"><p>Cómo llegar</p></a><table style="width: 100%;"><tbody><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 8</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 9</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 10</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 10.5</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 11.5</td></tr></tbody></table><hr color="#dadada" size="1"></div><div><p><strong>Sparta Mall Pza. Oeste</strong></p><a href="https://www.google.cl/maps/place/Mallplaza+Oeste/@-33.5167198,-70.7195259,17z/data=!3m1!4b1!4m5!3m4!1s0x9662dca7419ab291:0xfebfebddff97232a!8m2!3d-33.5167243!4d-70.7173372" target="_blank"><p>Cómo llegar</p></a><table style="width: 100%;"><tbody><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 8</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 9</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 9.5</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 10.5</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 11.5</td></tr></tbody></table><hr color="#dadada" size="1"></div><div><p><strong>Sparta Mall Sport</strong></p><a href="https://www.google.cl/maps/place/Mall+Sport/@-33.3706919,-70.508422,17z/data=!3m1!4b1!4m5!3m4!1s0x9662cbf23d9cebf1:0x89a205dc0337fb8f!8m2!3d-33.3706964!4d-70.5062333" target="_blank"><p>Cómo llegar</p></a><table style="width: 100%;"><tbody><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 9.5</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 10</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 10.5</td></tr></tbody></table><hr color="#dadada" size="1"></div><div><p><strong>Sparta Parque Arauco</strong></p><a href="https://www.google.cl/maps/place/Rosen/@-33.4021889,-70.5804381,17z/data=!3m1!4b1!4m5!3m4!1s0x9662cf26243dcc31:0xc9aacb64a9fec91!8m2!3d-33.4021934!4d-70.5782494" target="_blank"><p>Cómo llegar</p></a><table style="width: 100%;"><tbody><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 9.5</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 10.5</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 11.5</td></tr></tbody></table><hr color="#dadada" size="1"></div><div><p><strong>Sparta Plaza Egaña</strong></p><a href="https://www.google.cl/maps/place/Mall+Plaza+Ega%C3%B1a/@-33.4529622,-70.5717959,17z/data=!3m1!4b1!4m5!3m4!1s0x9662ce4a396cff93:0x3da8a6f37f2ba003!8m2!3d-33.4529667!4d-70.5696072" target="_blank"><p>Cómo llegar</p></a><table style="width: 100%;"><tbody><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 10</td></tr></tbody></table><hr color="#dadada" size="1"></div></div><button class="accordion">Valparaíso</button><div class="panel"><div><p><strong>Sparta Los Andes</strong></p><a href="https://www.google.cl/maps/place/Espacio+Urbano+Los+Andes/@-32.8352165,-70.6062901,17z/data=!3m1!4b1!4m5!3m4!1s0x968804d92b1095cf:0x2845350170c3f617!8m2!3d-32.835221!4d-70.6041014" target="_blank"><p>Cómo llegar</p></a><table style="width: 100%;"><tbody><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 9.5</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 10</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 10.5</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 11.5</td></tr></tbody></table><hr color="#dadada" size="1"></div><div><p><strong>Sparta Marina 2</strong></p><a href="https://www.google.cl/maps/place/Mall+Marina/@-33.0089576,-71.5504508,17z/data=!3m1!4b1!4m5!3m4!1s0x9689ddc274293141:0x9641abdaace2877d!8m2!3d-33.0089621!4d-71.5482621" target="_blank"><p>Cómo llegar</p></a><table style="width: 100%;"><tbody><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 8</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 9</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 9.5</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 10</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 10.5</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 11</td></tr><tr><td style="width: 12%;"><img class="circulo-rojo"></td><td style="width: 88%;">HEAD Brazer 2.0 Men AMARILLO 12</td></tr></tbody></table><hr color="#dadada" size="1"></div></div></div> <!-- contenido -->



<script>
function goBack(){
	window.history.back();
}

$(document).ready(function(){
 	var paramentros = new URLSearchParams(window.location.search);
 	var sku = paramentros.get('sku');
 	if (!sku){
 		$("#gif").html("");
   		console.log("No enviaste el código");	
   		alert("no hay codigo");
 	} else {
		
		var url = "https://digital.sparta.cl/api/stock_store/read.php?sku="+sku;
		var stock_tiendas = [];  
		jQuery.ajax(url).done(function(data) {
			//console.log(data);
			if (!data.registros){
				$("#gif").html("");
        		document.getElementById("contenido").innerHTML = '';  
        		document.getElementById("selecciona_region").innerHTML = "Este producto sólo está disponible para comprar online";
        	} else {
				document.getElementById("selecciona_region").innerHTML = "Selecciona tu Región";
				var regiones = getRegiones(data.registros);
	      		for (var i=0;i<regiones.length;i++){
	        		var temp = {};
	        		temp.nombre = regiones[i];
	        		temp.tiendas = [];
	        		var tiendas = getTiendasxRegion(data.registros,regiones[i]);
	        		for (var j=0;j<tiendas.length;j++){
	          			var temp_tiendas = {};
	          			temp_tiendas.nombre = tiendas[j][0];
	          			temp_tiendas.mapa = tiendas[j][1];
	          			temp_tiendas.telefono = tiendas[j][2];
	          			temp.tiendas.push(temp_tiendas);
	          			temp.tiendas[j].productos = [];
	          			var productos = getProductosxTiendaxRegion(data.registros,regiones[i],tiendas[j][0]);
	          			for (var k=0;k<productos.length;k++){
	            			var temp_productos = {};
	            			if(productos[k][2]=='UNU'){var talla = 'única'}else{var talla = productos[k][2]};
	            			temp_productos.sku = productos[k][0];
	            			temp_productos.nombre = productos[k][1];
	            			temp_productos.talla = talla;
	            			temp_productos.stock = productos[k][3];
	            			temp.tiendas[j].productos.push(temp_productos);
	          			}
	        		}
	        		stock_tiendas.push(temp);
	      		}
	      		console.log(stock_tiendas);
	      		var texto = '';
	      		var largo_tiendas = stock_tiendas.length;
	      		for (i=0;i<largo_tiendas;i++){
              if (i==0){
                texto += '<button class="accordion" style="border-radius:20px 20px 0 0;">'+stock_tiendas[i].nombre+'</strong></button>';
              } else {
                texto += '<button class="accordion">'+stock_tiendas[i].nombre+'</strong></button>';
              }
	      		 texto += '<div class="panel">'
					    for (j=0;j<stock_tiendas[i].tiendas.length;j++){
						    texto += ''
						    +'<div>'
                +'<p><strong>'+stock_tiendas[i].tiendas[j].nombre+'</strong></p>'
    				    +'<a href="'+stock_tiendas[i].tiendas[j].mapa+'" target="_blank"><p>Cómo llegar</p></a>'
    				    +'<table style="width: 100%;">'
        		    +'<tbody>';
        		    for (k=0;k<stock_tiendas[i].tiendas[j].productos.length;k++){
        				  var stock = stock_tiendas[i].tiendas[j].productos[k].stock;
                  texto += ''
        				  +'<tr>';
                  if (stock == 'bajo') {
                    texto += '<td style="width: 12%;"><img class="circulo-rojo"></td>';
                  } else if(stock == 'normal'){
                    texto += '<td style="width: 12%;"><img class="circulo-amarillo"> <img class="circulo-amarillo"></td>';
                  } else {
                    texto += '<td style="width: 12%;"><img class="circulo-verde"> <img class="circulo-verde"> <img class="circulo-verde"></td>';
                  }
                  texto +='<td style="width: 88%;">'+stock_tiendas[i].tiendas[j].productos[k].nombre +'</td>';
                  texto += '</tr>';
        				}
        				texto += '</tbody></table><hr color="#dadada" size=1></div>';
					    }
					    texto += '</div></div>';
	      		}
	      		//console.log(texto);
	      		$("#contenido").html(texto);
            crear_acordion();
            $("#gif").html("");
      		}		
		});

	}
});


function crear_acordion(){
  var acc = document.getElementsByClassName("accordion");
  var i;

  for (i = 0; i < acc.length; i++) {
    acc[i].addEventListener("click", function() {
      this.classList.toggle("active");
      var panel = this.nextElementSibling;
      if (panel.style.display === "block") {
        panel.style.display = "none";
      } else {
        panel.style.display = "block";
      }
    });
  }  
}



function uniqueRegiones(array_regiones){
  var array_unico = [];
  array_unico.push(array_regiones[0]);
  for (var i=1;i<array_regiones.length;i++){
  var unico = 0;
  for (var j=0;j<array_unico.length;j++){
  if (array_unico[j] == array_regiones[i]){
  unico++;
  }
  }
  if (unico == 0){
  array_unico.push(array_regiones[i]);
  }
  }  
  return array_unico;
  }

  function uniqueTiendas(array_tiendas){
  var array_unico = [];
  array_unico.push(array_tiendas[0]);
  for (var i=1;i<array_tiendas.length;i++){
  var unico = 0;
  for (var j=0;j<array_unico.length;j++){
  if (array_unico[j][0] == array_tiendas[i][0]){
  unico++;
  }
  }
  if (unico == 0){
  array_unico.push(array_tiendas[i]);
  }
  }
  return array_unico;
  }

  function getRegiones(matrix){
    var column = [];    
    for(var i=0; i<matrix.length; i++){
      column.push(matrix[i]["region"]);
    }
    var uniques = uniqueRegiones(column);
    return uniques
  }

  function getTiendasxRegion(matrix,region){
    var column = [];    
    for(var i=0; i<matrix.length; i++){
      if (matrix[i]["region"] == region){
        column.push([matrix[i]["tienda"],matrix[i]["mapa"],matrix[i]["telefono"]]);
      }      
    }
    var uniques = uniqueTiendas(column);
    return uniques
  }

  function getProductosxTiendaxRegion(matrix,region,tienda){
    var column = [];    
    for(var i=0; i<matrix.length; i++){
      if (matrix[i]["region"] == region && matrix[i]["tienda"] == tienda){
        column.push([matrix[i]["sku"],matrix[i]["nombre"],matrix[i]["talla"],matrix[i]["stock"]]);  
      }      
    }
    return column
  }
</script>



</body></html>